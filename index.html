<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Red Button Gamble</title>
  <style>
    /* Page layout: pure white background, center content */
    html, body {
      height: 100%;
      margin: 0;
    }
    body {
      display: flex;
      align-items: center;
      justify-content: center;
      background: #ffffff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
    }

    /* The single red 3D-style button */
    #redButton {
      width: clamp(140px, 22vmin, 240px);
      height: clamp(140px, 22vmin, 240px);
      border: none;
      border-radius: 50%;
      color: #ffffff;
      font-size: clamp(28px, 6vmin, 56px);
      font-weight: 700;
      cursor: pointer;
      user-select: none;
      /* 3D effect via gradient + layered shadows */
      background: radial-gradient(circle at 30% 30%, #ff6b6b 0%, #ff3b3b 40%, #e31616 70%, #b70f0f 100%);
      box-shadow:
        0 18px 0 0 rgba(128, 0, 0, 0.25) inset,  /* inner rim */
        0 -10px 18px rgba(255, 255, 255, 0.3) inset, /* top sheen */
        0 12px 24px rgba(183, 15, 15, 0.45); /* drop shadow */
      transition: transform 80ms ease, box-shadow 80ms ease, filter 80ms ease;
    }

    #redButton:active {
      transform: translateY(2px);
      box-shadow:
        0 12px 0 0 rgba(128, 0, 0, 0.25) inset,
        0 -8px 14px rgba(255, 255, 255, 0.25) inset,
        0 6px 14px rgba(183, 15, 15, 0.4);
      filter: brightness(0.98);
    }

    /* Ensure the button label is neatly centered */
    #redButton span {
      display: inline-block;
      line-height: 1;
      transform: translateY(2px); /* minor optical centering */
    }
  </style>
</head>
<body>
  <!-- Only element on the page: the red button with a numeric label -->
  <button id="redButton" aria-label="Increment button">
    <span id="label">0</span>
  </button>

  <script>
    // --- Game state ---
    let score = 0;          // displayed number
    let resetChance = 0;    // percent (0â€“100)

    // --- DOM references ---
    const btn = document.getElementById('redButton');
    const label = document.getElementById('label');

    // --- Audio setup (local file in the same directory) ---
    const clickSound = new Audio('click.mp3');
    clickSound.preload = 'auto';

    // --- Utility / game functions ---
    function updateDisplay() {
      // Update the single number shown on the button
      label.textContent = String(score);
    }

    function playClickSound() {
      // Always play a short click on every press
      try {
        clickSound.currentTime = 0;
        const p = clickSound.play();
        // Some browsers return a promise (might reject if blocked); ignore errors silently
        if (p && typeof p.catch === 'function') p.catch(() => {});
      } catch (_) {}
    }

    function incrementScore() {
      // a) Increase displayed number by 1
      score += 1;
      // b) Increase reset chance by 1% per click (cap at 100)
      resetChance = Math.min(100, resetChance + 1);
    }

    function checkReset() {
      // c) Roll a random number in [0, 100) and reset if roll <= resetChance
      const roll = Math.random() * 100;
      if (roll <= resetChance) {
        score = 0;
        resetChance = 0;
      }
    }

    // --- Wire up button interaction ---
    btn.addEventListener('click', () => {
      playClickSound();        // play sound on every click
      incrementScore();        // update score & chance
      checkReset();            // possibly reset based on chance
      updateDisplay();         // reflect final value after this click
    });

    // Initialize display (starts at 0 by design)
    updateDisplay();
  </script>
</body>
</html>
